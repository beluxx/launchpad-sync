<html>
  <head>
    <title>Source package recipe syntax</title>
    <link rel="stylesheet" type="text/css" href="/+icing/combo.css" />
  </head>
  <body>
    <div class="yui-d0">
      <h2>Source package recipe syntax</h2>

      <p>A recipe is just text that starts with a line such as:</p>
      <p>
        <code># bzr-builder format 0.2 deb-version {debupstream}-0~{revno}</code>
      </p>

      <p>
        The format specifier is there to allow the syntax to be changed in
        later versions, and the meaning of "deb-version" will be explained
        below.
      </p>

      <p>
        The next line specifies the base branch, this is the branch that will
        be used to define the initial files and directory structure.
      </p>

      <p>
        Next comes any number of lines of other branches to be merged in, but
        using a slightly different format. To merge a branch in to the base
        specify something like:
      </p>

      <p>
        <code>merge packaging lp:~foo-dev/foo/packaging</code>
      </p>

      <p>
        which specifies we are merging a branch we will refer to as
        "packaging", which can be found at the given URI. The name you give to
        the branch as the second item doesn't have to match anything else,
        it's just an identifier specific to the recipe.
      </p>

      <p>
        <a href="https://help.launchpad.net/Packaging/SourceBuilds/Recipes"
          target="_blank">Read more &gt;</a> on recipe syntax for other
        commands and specifying revisions for the branches.
      </p>

      <h3>deb-version</h3>

      <p>
        To build Debian source package that you desire you should make sure
        that "deb-version" is set to an appropriate value on the first line of
        your recipe. This will be used as the version number of the package.
        The value you put there also allows for substitution of values in to
        it based on various things when the recipe is processed:
      </p>

      <ul class="bulleted">
        <li><code>{date}</code> &mdash; will be substituted with just the
          current date, such as <code>20090819</code></li>
        <li><code>{debupstream}</code> &mdash; will be replaced by the
          upstream portion of the version number taken from debian/changelog
          in the final tree. If when the tree is built the top of
          debian/changelog has a version number of "<code>1.0-1</code>" then
          this would evaluate to "<code>1.0</code>".
        </li>
        <li><code>{revno}</code> &mdash; will be the revno of the base branch
          (the first specified)</li>
        <li><code>{revno:&lt;branch name&gt;}</code> &mdash; will be
          substituted with the revno for the branch named &lt;branch name&gt;
          in the recipe</li>
        <li><code>{time}</code> &mdash; will be substituted with the current
          date and time, such as <code>200908191512</code></li>
      </ul>

      <p>
        <a href="https://help.launchpad.net/Packaging/SourceBuilds/Recipes"
          target="_blank">Read more &gt;</a> on recipe syntax for other
        commands and specifying revisions for the branches.
      </p>
    </div>
  </body>
</html>
