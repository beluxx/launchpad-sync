<!-- Copyright 2009-2021 Canonical Ltd.  This software is licensed under the
     GNU Affero General Public License version 3 (see the file LICENSE).
-->

<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:browser="http://namespaces.zope.org/browser"
    xmlns:i18n="http://namespaces.zope.org/i18n"
    xmlns:xmlrpc="http://namespaces.zope.org/xmlrpc"
    i18n_domain="launchpad">
    <browser:url
       for="lp.code.interfaces.branch.IBranchSet"
       path_expression="string:branches"
       parent_utility="lp.services.webapp.interfaces.ILaunchpadRoot"
      />
    <browser:url
       for="lp.code.interfaces.gitrepository.IGitRepositorySet"
       path_expression="string:+git"
       parent_utility="lp.services.webapp.interfaces.ILaunchpadRoot"
      />
    <browser:feeds
        module="lp.code.feed.branch"
        classes="BranchFeed PersonBranchFeed ProductBranchFeed ProjectBranchFeed
                 PersonRevisionFeed ProductRevisionFeed ProjectRevisionFeed"
        />

  <include package=".widgets"/>

  <facet facet="branches">

  <browser:defaultView
      for="lp.registry.interfaces.product.IProductSet"
      layer="lp.code.publisher.CodeLayer"
      name="+branches"/>
  <browser:page
      for="lp.registry.interfaces.product.IProductSet"
      name="+branches"
      class="lp.code.browser.bazaar.BazaarProductView"
      template="../templates/code-in-branches.pt"
      permission="zope.Public"
      />
  <browser:page
      name="+configure-code"
      for="lp.registry.interfaces.product.IProduct"
      class="lp.registry.browser.product.ProductSetBranchView"
      permission="launchpad.Edit"
      template="../templates/configure-code.pt"
      />
  <browser:page
      name="+setbranch"
      for="lp.registry.interfaces.productseries.IProductSeries"
      class="lp.registry.browser.productseries.ProductSeriesSetBranchView"
      permission="launchpad.Edit"
      template="../templates/configure-code.pt"
      />
  <browser:page
      name="+configure-code-macros"
      for="lp.registry.interfaces.productseries.IProductSeries"
      class="lp.app.browser.launchpad.Macro"
      permission="zope.Public"
      template="../templates/configure-code-macros.pt"
      />
    <browser:page
      name="+configure-code-macros"
      for="lp.registry.interfaces.product.IProduct"
      class="lp.app.browser.launchpad.Macro"
      permission="zope.Public"
      template="../templates/configure-code-macros.pt"
      />
  <browser:page
      for="lp.services.webapp.interfaces.ILaunchpadApplication"
      name="+project-cloud"
      class="lp.code.browser.bazaar.BazaarProjectsRedirect"
      permission="zope.Public"
      />
  <browser:page
      for="lp.services.webapp.interfaces.ILaunchpadApplication"
      name="+recently-registered-branches"
      class="lp.code.browser.branchlisting.RecentlyRegisteredBranchesView"
      template="../templates/branch-listing-cross-product.pt"
      permission="zope.Public"
      />
  <browser:page
      for="lp.services.webapp.interfaces.ILaunchpadApplication"
      name="+recently-imported-branches"
      class="lp.code.browser.branchlisting.RecentlyImportedBranchesView"
      template="../templates/branch-listing-cross-product.pt"
      permission="zope.Public"
      />
  <browser:page
      for="lp.services.webapp.interfaces.ILaunchpadApplication"
      name="+recently-changed-branches"
      class="lp.code.browser.branchlisting.RecentlyChangedBranchesView"
      template="../templates/branch-listing-cross-product.pt"
      permission="zope.Public"
      />

    <browser:url
        for="lp.code.interfaces.codereviewvote.ICodeReviewVoteReference"
        path_expression="string:+review/${id}"
        attribute_to_parent="branch_merge_proposal"
        rootsite="code"/>
    <browser:page
        for="lp.code.interfaces.codereviewvote.ICodeReviewVoteReference"
        name="+reassign"
        class="lp.code.browser.codereviewvote.CodeReviewVoteReassign"
        permission="launchpad.AnyPerson"
        template="../../app/templates/generic-edit.pt"/>
        <browser:url
            for="lp.code.interfaces.codeimportmachine.ICodeImportMachine"
            path_expression="string:${hostname}"
            parent_utility="lp.code.interfaces.codeimportmachine.ICodeImportMachineSet"
            rootsite="code"/>
        <browser:defaultView
            for="lp.code.interfaces.codeimportmachine.ICodeImportMachine"
            name="+index"/>
        <browser:page
            for="lp.code.interfaces.codeimportmachine.ICodeImportMachine"
            class="lp.code.browser.codeimportmachine.CodeImportMachineView"
            name="+index"
            template="../templates/codeimport-machine-index.pt"
            permission="zope.Public"/>
        <browser:navigation
            module="lp.code.browser.codeimportmachine"
            classes="CodeImportMachineSetNavigation"/>
        <browser:url
            for="lp.code.interfaces.codeimportmachine.ICodeImportMachineSet"
            path_expression="string:+machines"
            parent_utility="lp.code.interfaces.codeimport.ICodeImportSet"
            rootsite="code"/>
        <browser:defaultView
            for="lp.code.interfaces.codeimportmachine.ICodeImportMachineSet"
            name="+index"/>
        <browser:page
            for="lp.code.interfaces.codeimportmachine.ICodeImportMachineSet"
            class="lp.code.browser.codeimportmachine.CodeImportMachineSetView"
            name="+index"
            template="../templates/codeimport-machines.pt"
            permission="zope.Public"/>
    <browser:url
        for="lp.code.interfaces.branchref.IBranchRef"
        path_expression="string:.bzr"
        attribute_to_parent="branch"/>
    <browser:navigation
        module="lp.code.browser.branchref"
        classes="BranchRefNavigation"/>
    <browser:url
        for="lp.code.interfaces.codehosting.IBazaarApplication"
        path_expression="string:+code"
        parent_utility="lp.services.webapp.interfaces.ILaunchpadRoot"
        rootsite="code"/>
    <browser:defaultView
        for="lp.code.interfaces.codehosting.IBazaarApplication"
        name="+index"/>
    <browser:page
        for="lp.code.interfaces.codehosting.IBazaarApplication"
        permission="zope.Public"
        class="lp.code.browser.bazaar.BazaarApplicationView"
        name="+index"
        template="../templates/bazaar-index.pt" />
    <browser:navigation
        module="lp.code.browser.branchmergeproposal"
        classes="BranchMergeProposalNavigation"/>
    <browser:defaultView
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        name="+index"/>

    <!-- No view needed -->
    <browser:pages
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        permission="launchpad.View">
      <browser:page
          name="+heading"
          template="../templates/branchmergeproposal-heading.pt"/>
      <browser:page
          name="+summary-fragment"
          template="../templates/branchmergeproposal-summary-fragment.pt"/>
    </browser:pages>

    <browser:pages
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.branchmergeproposal.BranchMergeProposalView"
        permission="launchpad.View">
        <browser:page
            name="+index"
            template="../templates/branchmergeproposal-index.pt"/>
        <browser:page
            name="++diff"
            template="../templates/branchmergeproposal-diff.pt"/>
        <browser:page
            name="++diff-stats"
            template="../templates/branchmergeproposal-diff-stats.pt"/>
        <browser:page
            name="+pagelet-summary"
            template="../templates/branchmergeproposal-pagelet-summary.pt"/>
        <browser:page
            name="++bug-links"
            template="../templates/branchmergeproposal-bug-links.pt"/>
    </browser:pages>
    <browser:page
        name="+rescan"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.branchmergeproposal.BranchMergeProposalRescanView"
        permission="launchpad.Edit"
        template="../templates/branchmergeproposal-rescan.pt"/>
    <browser:pages
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.branchmergeproposal.BranchMergeProposalVoteView"
        permission="launchpad.View">
        <browser:page
            name="+votes"
            template="../templates/branchmergeproposal-votes.pt"/>
        <browser:page
            name="+vote-summary"
            template="../templates/branchmergeproposal-vote-summary.pt"/>
      </browser:pages>
    <browser:pages
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.branchmergeproposal.BranchMergeProposalEditView"
        permission="launchpad.Edit">
        <browser:page
            name="+edit"
            template="../../app/templates/generic-edit.pt"/>
    </browser:pages>
    <browser:page
        name="+edit-commit-message"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.branchmergeproposal.BranchMergeProposalCommitMessageEditView"
        permission="launchpad.Edit"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        name="+edit-description"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.branchmergeproposal.BranchMergeProposalDescriptionEditView"
        permission="launchpad.Edit"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        name="+delete"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.branchmergeproposal.BranchMergeProposalDeleteView"
        permission="launchpad.Edit"
        template="../templates/branchmergeproposal-delete.pt"/>
    <browser:page
        name="+edit-status"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.branchmergeproposal.BranchMergeProposalChangeStatusView"
        permission="launchpad.Edit"
        template="../templates/branchmergeproposal-editstatus.pt"/>
    <browser:page
        name="+request-review"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.branchmergeproposal.BranchMergeProposalRequestReviewView"
        permission="launchpad.Edit"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        name="+resubmit"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.branchmergeproposal.BranchMergeProposalResubmitView"
        permission="launchpad.Edit"
        template="../templates/branchmergeproposal-resubmit.pt"/>
    <browser:page
        name="+merged"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.branchmergeproposal.BranchMergeProposalMergedView"
        permission="launchpad.Edit"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        name="+update-diff"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.branchmergeproposal.BranchMergeProposalScheduleUpdateDiffView"
        permission="launchpad.Edit"
        template="../templates/branchmergeproposal-update-diff.pt"/>
    <browser:page
        name="+linkbug"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.bugs.browser.buglinktarget.BugLinkView"
        permission="launchpad.AnyPerson"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        name="+unlinkbug"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.bugs.browser.buglinktarget.BugsUnlinkView"
        permission="launchpad.AnyPerson"
        template="../templates/branchmergeproposal-unlinkbugs.pt"/>
    <browser:page
        name="+link-summary"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.branchmergeproposal.BranchMergeCandidateView"
        permission="zope.Public"
        template="../templates/branchmergeproposal-link-summary.pt"/>
    <browser:page
        name="+pagelet-subscribers"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.branchmergeproposal.BranchMergeProposalSubscribersView"
        permission="launchpad.View"
        template="../templates/branchmergeproposal-pagelet-subscribers.pt"/>
    <browser:page
        name="+comment"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.codereviewcomment.CodeReviewCommentAddView"
        permission="launchpad.AnyPerson"
        template="../templates/codereviewcomment-reply.pt"/>
    <browser:page
        name="+review"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        class="lp.code.browser.branchmergeproposal.BranchMergeProposalAddVoteView"
        permission="launchpad.AnyPerson"
        template="../templates/branchmergeproposal-vote.pt"/>
    <browser:url
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        path_expression="string:+merge/${id}"
        attribute_to_parent="parent"
        rootsite="code"/>
    <browser:page
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposalListingBatchNavigator"
        name="+listing"
        template="../templates/branchmergeproposal-listing.pt"
        permission="zope.Public"/>
    <browser:page
        for="*"
        name="+bmp-macros"
        permission="zope.Public"
        template="../templates/branchmergeproposal-macros.pt"
        class="lp.app.browser.launchpad.Macro"/>
    <browser:menus
        classes="
            BranchMergeProposalContextMenu
            BranchMergeProposalEditMenu
            BranchMergeProposalActionNavigationMenu"
        module="lp.code.browser.branchmergeproposal"/>
    <browser:defaultView
        for="lp.code.interfaces.branchsubscription.IBranchSubscription"
        name="+index"/>
    <browser:page
        name="+index"
        for="lp.code.interfaces.branchsubscription.IBranchSubscription"
        class="lp.code.browser.branchsubscription.BranchSubscriptionEditView"
        permission="launchpad.Edit"
        template="../templates/branchsubscription-edit.pt"/>
    <browser:url
        for="lp.code.interfaces.branchsubscription.IBranchSubscription"
        path_expression="string:+subscription/${person/name}"
        attribute_to_parent="branch"
        rootsite="code"/>
    <browser:defaultView
        for="lp.code.interfaces.branch.IBranch"
        name="+index"/>
    <browser:url
        for="lp.code.interfaces.branch.IBranch"
        urldata="lp.code.browser.branch.BranchURL"/>
    <browser:navigation
        module="lp.code.browser.branch"
        classes="BranchNavigation"/>
    <browser:pages
        for="lp.code.interfaces.branch.IBranch"
        permission="zope.Public"
        class="lp.code.browser.branch.BranchView">
        <browser:page
            name="+index"
            template="../templates/branch-index.pt"/>
        <browser:page
            name="+portlet-privacy"
            template="../templates/branch-portlet-privacy.pt"/>
        <browser:page
            name="++bug-links"
            template="../templates/branch-bug-links.pt"/>
        <browser:page
            name="++branch-information"
            template="../templates/branch-information.pt" />
        <browser:page
            name="++branch-management"
            template="../templates/branch-management.pt" />
        <browser:page
            name="++branch-pending-merges"
            template="../templates/branch-pending-merges.pt" />
        <browser:page
            name="++branch-recipes"
            template="../templates/branch-recipes.pt" />
        <browser:page
            name="++branch-import-details"
            template="../templates/import-details.pt" />
        <browser:page
            name="++branch-revisions"
            template="../templates/branch-revisions.pt" />
        <browser:page
            name="++branch-metadata"
            template="../templates/branch-metadata.pt" />
        <browser:page
            name="++branch-related-bugs-specs"
            template="../templates/branch-related-bugs-specs.pt" />
    </browser:pages>
    <browser:pages
        for="lp.code.interfaces.branch.IBranch"
        permission="zope.Public">
        <browser:page
            name="+heading"
            template="../templates/branch-heading.pt"/>
    </browser:pages>
    <browser:page
        name="+portlet-subscribers"
        for="lp.code.interfaces.branch.IBranch"
        permission="zope.Public"
        template="../templates/branch-portlet-subscribers.pt"/>
    <browser:page
        name="+branch-portlet-subscriber-content"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branchsubscription.BranchPortletSubscribersContent"
        template="../templates/branch-portlet-subscribers-content.pt"
        permission="zope.Public" />
    <browser:page
        for="lp.code.interfaces.branch.IBranch"
        name="+macros"
        permission="zope.Public"
        template="../templates/branch-macros.pt"/>
    <browser:page
        name="+whiteboard"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branch.BranchEditWhiteboardView"
        permission="launchpad.AnyPerson"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        name="+edit-status"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branch.BranchEditStatusView"
        permission="launchpad.Edit"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        name="+edit-information-type"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branch.BranchEditInformationTypeView"
        permission="launchpad.Moderate"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        name="+edit"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branch.BranchEditView"
        permission="launchpad.Edit"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        name="+upgrade"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branch.BranchUpgradeView"
        permission="launchpad.Edit"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        name="+reviewer"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branch.BranchReviewerEditView"
        permission="launchpad.Edit"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        name="+rescan"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branch.BranchRescanView"
        permission="launchpad.Moderate"
        template="../templates/branch-rescan.pt"/>
    <browser:page
        name="+edit-import"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.codeimport.CodeImportEditView"
        permission="launchpad.Edit"
        template="../../app/templates/generic-edit.pt"/>
    <class class="lp.code.browser.branch.BranchDiffView">
        <allow interface="zope.publisher.interfaces.browser.IBrowserPublisher"
               attributes="__call__"/>
    </class>
    <browser:page
        name="+delete"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branch.BranchDeletionView"
        permission="launchpad.Edit"
        template="../templates/branch-delete.pt"/>
    <browser:pages
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branch.BranchMirrorStatusView"
        permission="launchpad.View">
        <browser:page
            name="+mirror-status"
            template="../templates/branch-mirror-status.pt"/>
        <browser:page
            name="+messages"
            template="../templates/branch-messages.pt"/>
    </browser:pages>
    <browser:page
        name="+subscribe"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branchsubscription.BranchSubscriptionAddView"
        permission="launchpad.AnyPerson"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        name="+register-merge"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branch.RegisterBranchMergeProposalView"
        permission="launchpad.AnyPerson"
        template="../templates/branch-register-merge.pt"/>
    <browser:page
        name="+linkbug"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.bugs.browser.bugbranch.BranchLinkToBugView"
        permission="launchpad.AnyPerson"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        name="+linkblueprint"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.blueprints.browser.specificationbranch.BranchLinkToSpecificationView"
        permission="launchpad.AnyPerson"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        name="+addsubscriber"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branchsubscription.BranchSubscriptionAddOtherView"
        permission="launchpad.AnyPerson"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        name="+edit-subscription"
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branchsubscription.BranchSubscriptionEditOwnView"
        permission="launchpad.AnyPerson"
        template="../templates/branch-edit-subscription.pt"/>
    <browser:page
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.codeimport.RequestImportView"
        name="+request-import"
        template="../templates/inline-form-only-buttons.pt"
        permission="launchpad.AnyPerson"/>
    <browser:page
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.codeimport.TryImportAgainView"
        name="+try-again"
        template="../templates/inline-form-only-buttons.pt"
        permission="launchpad.AnyPerson"/>
    <browser:page
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branchmergeproposallisting.BranchActiveReviewsView"
        permission="zope.Public"
        name="+activereviews"
        template="../templates/active-reviews.pt"/>
    <browser:page
        for="lp.code.interfaces.branch.IBranch"
        class="lp.code.browser.branchmergeproposallisting.BranchDependentMergesView"
        permission="zope.Public"
        name="+dependent-merges"
        template="../templates/branchmergeproposal-generic-listing.pt"/>
    <browser:page
        for="lp.code.interfaces.branch.IBranchBatchNavigator"
        name="+branch-listing"
        template="../templates/branch-listing.pt"
        permission="zope.Public"/>
    <browser:menus
        classes="
            BranchContextMenu
            BranchEditMenu"
        module="lp.code.browser.branch"/>
    <browser:url
        for="lp.code.interfaces.codereviewcomment.ICodeReviewComment"
        path_expression="string:comments/${id}"
        attribute_to_parent="branch_merge_proposal"
        rootsite="code"/>
    <browser:navigation
        module=".codereviewcomment"
        classes="CodeReviewCommentNavigation" />
    <browser:defaultView
        for="lp.code.interfaces.codereviewcomment.ICodeReviewComment"
        name="+index"/>
    <browser:pages
        for="lp.code.interfaces.codereviewcomment.ICodeReviewComment"
        class="lp.code.browser.codereviewcomment.CodeReviewCommentView"
        permission="zope.Public">
        <browser:page
            name="+fragment"
            template="../templates/codereviewcomment-fragment.pt"/>
        <browser:page
            name="+download"
            attribute="download"
        />
    </browser:pages>
    <browser:page
        for="lp.code.interfaces.codereviewcomment.ICodeReviewComment"
        name="+index"
        template="../templates/codereviewcomment-index.pt"
        class="lp.code.browser.codereviewcomment.CodeReviewCommentIndexView"
        permission="zope.Public"
        />
    <browser:pages
        for="lp.code.browser.codereviewcomment.ICodeReviewDisplayComment"
        class="lp.code.browser.codereviewcomment.CodeReviewCommentView"
        permission="zope.Public">
        <browser:page
            name="+comment-header"
            template="../templates/codereviewcomment-header.pt"/>
        <browser:page
            name="+comment-body"
            template="../templates/codereviewcomment-body.pt"/>
        <browser:page
            name="+comment-footer"
            template="../templates/codereviewcomment-footer.pt"/>
    </browser:pages>
    <adapter
      provides="lp.services.messages.interfaces.message.IMessage"
      for="lp.code.browser.codereviewcomment.ICodeReviewDisplayComment"
      factory="lp.code.browser.codereviewcomment.get_message"/>

    <browser:pages
        for="lp.code.browser.branchmergeproposal.ICodeReviewNewRevisions"
        class="lp.services.webapp.LaunchpadView"
        permission="zope.Public">
        <browser:page
            name="+comment-header"
            template="../templates/codereviewnewrevisions-header.pt"/>
        <browser:page
            name="+comment-footer"
            template="../templates/codereviewnewrevisions-footer.pt"/>
    </browser:pages>
    <browser:page
        name="+reply"
        for="lp.code.interfaces.codereviewcomment.ICodeReviewComment"
        class="lp.code.browser.codereviewcomment.CodeReviewCommentAddView"
        permission="launchpad.AnyPerson"
        template="../templates/codereviewcomment-reply.pt"/>
    <browser:menus
        classes="CodeReviewCommentContextMenu"
        module="lp.code.browser.codereviewcomment"/>
        <browser:page
            for="lp.code.interfaces.codeimport.ICodeImport"
            name="+macros"
            permission="zope.Public"
            template="../templates/codeimport-macros.pt"/>
        <browser:url
            for="lp.code.interfaces.codeimport.ICodeImportSet"
            path_expression="string:+code-imports"
            parent_utility="lp.services.webapp.interfaces.ILaunchpadRoot"
            rootsite="code"/>
        <browser:defaultView
            for="lp.code.interfaces.codeimport.ICodeImportSet"
            name="+index"/>
        <browser:page
            for="lp.code.interfaces.codeimport.ICodeImportSet"
            class="lp.code.browser.codeimport.CodeImportSetView"
            name="+index"
            template="../templates/codeimport-list.pt"
            permission="zope.Public"/>
        <browser:page
            for="lp.code.interfaces.codeimport.ICodeImportSet"
            class="lp.code.browser.codeimport.CodeImportNewView"
            name="+new"
            template="../templates/codeimport-new.pt"
            permission="launchpad.AnyPerson"/>
        <browser:page
            for="lp.registry.interfaces.product.IProduct"
            class="lp.code.browser.codeimport.CodeImportNewView"
            name="+new-import"
            template="../templates/codeimport-new.pt"
            permission="launchpad.AnyPerson"/>
    <browser:url
        for="lp.code.interfaces.codeimport.ICodeImport"
        attribute_to_parent="target"
        path_expression="string:+code-import"
        rootsite="code"/>
    <browser:navigation
        module="lp.code.browser.codeimport"
        classes="CodeImportSetNavigation"/>
    <browser:defaultView
        for="lp.registry.interfaces.projectgroup.IProjectGroup"
        name="+branches"
        layer="lp.code.publisher.CodeLayer"/>
    <browser:page
        for="lp.registry.interfaces.sourcepackage.ISourcePackage"
        class="lp.code.browser.branchlisting.SourcePackageBranchesView"
        permission="zope.Public"
        name="+branches"
        template="../templates/sourcepackage-branches.pt"/>
    <browser:page
        for="lp.registry.interfaces.sourcepackage.ISourcePackage"
        class="lp.code.browser.summary.BranchCountSummaryView"
        permission="zope.Public"
        name="+count-summary"
        template="../templates/branch-count-summary.pt"/>
    <browser:page
        for="lp.registry.interfaces.distribution.IDistribution"
        class="lp.code.browser.branchlisting.DistributionBranchListingView"
        permission="zope.Public"
        name="+branches"
        template="../templates/generic-branch-listing.pt"/>
    <browser:page
        for="lp.registry.interfaces.distribution.IDistribution"
        class="lp.code.browser.summary.BranchCountSummaryView"
        permission="zope.Public"
        name="+count-summary"
        template="../templates/branch-count-summary.pt"/>
    <browser:page
        for="lp.registry.interfaces.distroseries.IDistroSeries"
        class="lp.code.browser.branchlisting.DistroSeriesBranchListingView"
        permission="zope.Public"
        name="+branches"
        template="../templates/generic-branch-listing.pt"/>
    <browser:page
        for="lp.registry.interfaces.distroseries.IDistroSeries"
        class="lp.code.browser.summary.BranchCountSummaryView"
        permission="zope.Public"
        name="+count-summary"
        template="../templates/branch-count-summary.pt"/>
    <browser:page
        for="lp.registry.interfaces.distributionsourcepackage.IDistributionSourcePackage"
        class="lp.code.browser.branchlisting.DistributionSourcePackageBranchesView"
        permission="zope.Public"
        name="+all-branches"
        template="../templates/generic-branch-listing.pt"/>
    <browser:page
        for="lp.registry.interfaces.distributionsourcepackage.IDistributionSourcePackage"
        class="lp.code.browser.branchlisting.GroupedDistributionSourcePackageBranchesView"
        permission="zope.Public"
        name="+branches"
        template="../templates/distributionsourcepackage-branches-grouped.pt"/>
    <browser:page
        for="lp.registry.interfaces.distributionsourcepackage.IDistributionSourcePackage"
        class="lp.code.browser.summary.BranchCountSummaryView"
        permission="zope.Public"
        name="+count-summary"
        template="../templates/branch-count-summary.pt"/>
    <browser:page
        for="lp.registry.interfaces.projectgroup.IProjectGroup"
        class="lp.code.browser.branchlisting.ProjectBranchesView"
        permission="zope.Public"
        name="+branches"
        template="../templates/project-branches.pt"/>
    <browser:page
        for="lp.registry.interfaces.projectgroup.IProjectGroup"
        class="lp.code.browser.summary.BranchCountSummaryView"
        permission="zope.Public"
        name="+count-summary"
        template="../templates/branch-count-summary.pt"/>

        <browser:menus
            module="lp.code.browser.branchlisting"
            classes="
                PersonBranchesMenu"/>
        <browser:defaultView
            for="lp.registry.interfaces.person.IPerson"
            layer="lp.code.publisher.CodeLayer"
            name="+branches"/>
        <browser:page
            for="lp.registry.interfaces.person.IPerson"
            class="lp.code.browser.branchlisting.PersonBranchesView"
            permission="zope.Public"
            name="+branches"
            template="../templates/person-branches.pt"/>
        <browser:renamed-page
            for="lp.registry.interfaces.person.IPerson"
            name="+ownedbranches"
            new_name="+branches"
            rootsite="code"/>
        <browser:renamed-page
            for="lp.registry.interfaces.person.IPerson"
            name="+registeredbranches"
            new_name="+branches"
            rootsite="code"/>
        <browser:renamed-page
            for="lp.registry.interfaces.person.IPerson"
            name="+subscribedbranches"
            new_name="+branches"
            rootsite="code"/>
        <!-- xXX: Need redirects from +{owned,registered,subscribed}branches. -->
        <browser:page
            for="lp.registry.interfaces.person.IPerson"
            class="lp.code.browser.branchlisting.PersonCodeSummaryView"
            permission="zope.Public"
            name="+codesummary"
            template="../templates/person-codesummary.pt"/>
        <browser:page
            for="lp.registry.interfaces.person.IPerson"
            class="lp.code.browser.branchmergeproposallisting.PersonActiveReviewsView"
            permission="zope.Public"
            name="+activereviews"
            template="../templates/active-reviews.pt"/>
        <browser:page
            for="lp.registry.interfaces.person.IPerson"
            class="lp.code.browser.branchlisting.PersonTeamBranchesView"
            name="+portlet-teambranches"
            template="../templates/person-portlet-teambranches.pt"
            permission="zope.Public"/>

    <browser:page
        for="lp.registry.interfaces.product.IProduct"
        class="lp.code.browser.branchlisting.ProductBranchesView"
        permission="zope.Public"
        name="+branches"
        template="../templates/product-branches.pt"/>
    <browser:renamed-page
        for="lp.registry.interfaces.product.IProduct"
        name="+all-branches"
        new_name="+branches"
        rootsite="code"/>
   <browser:page
      for="lp.registry.interfaces.product.IProduct"
      class="lp.code.browser.branchlisting.ProductBranchStatisticsView"
      permission="zope.Public"
      name="+portlet-product-branchstatistics"
      template="../templates/product-portlet-branchstatistics.pt"/>
    <browser:page
        for="lp.registry.interfaces.product.IProduct"
        class="lp.code.browser.branchlisting.ProductBranchSummaryView"
        permission="zope.Public"
        name="+branch-summary"
        template="../templates/product-branch-summary.pt"/>
    <browser:page
        for="lp.registry.interfaces.product.IProduct"
        class="lp.code.browser.summary.BranchCountSummaryView"
        permission="zope.Public"
        name="+count-summary"
        template="../templates/branch-count-summary.pt"/>

    <browser:defaultView
        for="lp.code.interfaces.gitrepository.IGitRepository"
        name="+index"/>
    <browser:url
        for="lp.code.interfaces.gitrepository.IGitRepository"
        urldata="lp.code.browser.gitrepository.GitRepositoryURL"/>
    <browser:navigation
        module="lp.code.browser.gitrepository"
        classes="GitRepositoryNavigation"/>
    <browser:menus
        module="lp.code.browser.gitrepository"
        classes="
            GitRepositoryContextMenu
            GitRepositoryEditMenu"/>
    <browser:pages
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.gitrepository.GitRepositoryView"
        permission="launchpad.View">
        <browser:page
            name="+index"
            template="../templates/gitrepository-index.pt"/>
        <browser:page
            name="+portlet-privacy"
            template="../templates/gitrepository-portlet-privacy.pt"/>
        <browser:page
            name="++repository-management"
            template="../templates/gitrepository-management.pt"/>
        <browser:page
            name="++repository-recipes"
            template="../templates/gitrepository-recipes.pt"/>
        <browser:page
            name="++repository-pending-merges"
            template="../templates/gitrepository-pending-merges.pt"/>
        <browser:page
            name="++repository-import-details"
            template="../templates/import-details.pt"/>
    </browser:pages>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        permission="launchpad.View"
        name="+portlet-subscribers"
        template="../templates/gitrepository-portlet-subscribers.pt"/>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.gitsubscription.GitRepositoryPortletSubscribersContent"
        permission="launchpad.View"
        name="+repository-portlet-subscriber-content"
        template="../templates/gitrepository-portlet-subscribers-content.pt"/>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        name="+macros"
        permission="zope.Public"
        template="../templates/git-macros.pt"/>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.gitrepository.GitRepositoryEditInformationTypeView"
        permission="launchpad.Edit"
        name="+edit-information-type"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.gitrepository.GitRepositoryEditReviewerView"
        permission="launchpad.Edit"
        name="+reviewer"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.gitrepository.GitRepositoryEditView"
        permission="launchpad.Edit"
        name="+edit"
        template="../templates/gitrepository-edit.pt"/>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.gitrepository.GitRepositoryRescanView"
        permission="launchpad.Edit"
        name="+rescan"
        template="../templates/gitrepository-rescan.pt"/>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.gitrepository.GitRepositoryForkView"
        permission="launchpad.View"
        name="+fork"
        template="../templates/gitrepository-fork.pt"/>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.codeimport.CodeImportEditView"
        permission="launchpad.Edit"
        name="+edit-import"
        template="../../app/templates/generic-edit.pt"/>
    <class class="lp.code.browser.gitrepository.GitRepositoryDiffView">
        <allow interface="zope.publisher.interfaces.browser.IBrowserPublisher"
               attributes="__call__"/>
    </class>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.gitrepository.GitRepositoryPermissionsView"
        name="+permissions"
        permission="launchpad.Edit"
        template="../templates/gitrepository-permissions.pt"/>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.gitrepository.GitRepositoryDeletionView"
        permission="launchpad.Edit"
        name="+delete"
        template="../templates/gitrepository-delete.pt"/>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.gitrepository.GitRepositoryActivityView"
        permission="launchpad.Edit"
        name="+activity"
        template="../templates/gitrepository-activity.pt" />
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.gitsubscription.GitSubscriptionAddView"
        permission="launchpad.AnyPerson"
        name="+subscribe"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.gitsubscription.GitSubscriptionAddOtherView"
        permission="launchpad.AnyPerson"
        name="+addsubscriber"
        template="../../app/templates/generic-edit.pt"/>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.gitsubscription.GitSubscriptionEditOwnView"
        permission="launchpad.AnyPerson"
        name="+edit-subscription"
        template="../templates/gitrepository-edit-subscription.pt"/>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.codeimport.RequestImportView"
        permission="launchpad.AnyAllowedPerson"
        name="+request-import"
        template="../templates/inline-form-only-buttons.pt"/>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.codeimport.TryImportAgainView"
        permission="launchpad.AnyAllowedPerson"
        name="+try-again"
        template="../templates/inline-form-only-buttons.pt"/>
    <browser:page
        for="lp.code.interfaces.gitrepository.IGitRepository"
        class="lp.code.browser.branchmergeproposallisting.BranchActiveReviewsView"
        permission="zope.Public"
        name="+activereviews"
        template="../templates/active-reviews.pt"/>

    <adapter
        provides="lp.services.webapp.interfaces.IBreadcrumb"
        for="lp.code.interfaces.gitrepository.IGitRepository"
        factory="lp.code.browser.gitrepository.GitRepositoryBreadcrumb"
        permission="zope.Public"/>

  <browser:url
        for="lp.code.interfaces.gitrepository.IRevisionStatusReport"
        path_expression="string:+status/${id}"
        attribute_to_parent="git_repository"
        rootsite="code"/>

    <browser:defaultView
        for="lp.code.interfaces.gitref.IGitRef"
        name="+index"/>
    <browser:url
        for="lp.code.interfaces.gitref.IGitRef"
        path_expression="string:+ref/${url_quoted_name}"
        attribute_to_parent="repository"
        rootsite="code"/>
    <browser:pages
        for="lp.code.interfaces.gitref.IGitRef"
        class="lp.code.browser.gitref.GitRefView"
        permission="launchpad.View">
        <browser:page
            name="+index"
            template="../templates/gitref-index.pt"/>
        <browser:page
            name="++ref-commits"
            template="../templates/gitref-commits.pt"/>
        <browser:page
            name="++ref-management"
            template="../templates/gitref-management.pt"/>
        <browser:page
            name="++ref-pending-merges"
            template="../templates/gitref-pending-merges.pt"/>
        <browser:page
            name="++ref-recipes"
            template="../templates/gitref-recipes.pt"/>
    </browser:pages>
    <browser:page
        for="lp.code.interfaces.gitref.IGitRef"
        name="+macros"
        permission="zope.Public"
        template="../templates/git-macros.pt"/>
    <browser:page
        for="lp.code.interfaces.gitref.IGitRefBatchNavigator"
        permission="zope.Public"
        name="+ref-listing"
        template="../templates/gitref-listing.pt"/>
    <browser:page
        for="lp.code.interfaces.gitref.IGitRef"
        class="lp.code.browser.gitref.GitRefRegisterMergeProposalView"
        name="+register-merge"
        permission="launchpad.AnyPerson"
        template="../templates/gitref-register-merge.pt"/>
    <browser:page
        for="lp.code.interfaces.gitref.IGitRef"
        class="lp.code.browser.branchmergeproposallisting.BranchActiveReviewsView"
        permission="zope.Public"
        name="+activereviews"
        template="../templates/active-reviews.pt"/>
    <browser:page
        for="lp.code.interfaces.gitref.IGitRef"
        class="lp.code.browser.branchmergeproposallisting.BranchDependentMergesView"
        permission="zope.Public"
        name="+dependent-merges"
        template="../templates/branchmergeproposal-generic-listing.pt"/>
    <browser:menus
        classes="GitRefContextMenu"
        module="lp.code.browser.gitref"/>
    <adapter
        provides="lp.services.webapp.interfaces.IBreadcrumb"
        for="lp.code.interfaces.gitref.IGitRef"
        factory="lp.services.webapp.breadcrumb.NameBreadcrumb"
        permission="zope.Public"/>

    <browser:defaultView
        for="lp.code.interfaces.gitsubscription.IGitSubscription"
        name="+index"/>
    <browser:page
        for="lp.code.interfaces.gitsubscription.IGitSubscription"
        class="lp.code.browser.gitsubscription.GitSubscriptionEditView"
        permission="launchpad.Edit"
        name="+index"
        template="../templates/gitsubscription-edit.pt"/>
    <browser:url
        for="lp.code.interfaces.gitsubscription.IGitSubscription"
        path_expression="string:+subscription/${person/name}"
        attribute_to_parent="repository"
        rootsite="code"/>

    <browser:page
        for="lp.registry.interfaces.product.IProduct"
        class="lp.code.browser.gitlisting.TargetGitListingView"
        permission="zope.Public"
        name="+git"
        template="../templates/gitlisting.pt"/>
    <browser:page
        for="lp.registry.interfaces.distributionsourcepackage.IDistributionSourcePackage"
        class="lp.code.browser.gitlisting.TargetGitListingView"
        permission="zope.Public"
        name="+git"
        template="../templates/gitlisting.pt"/>
    <browser:page
        for="lp.registry.interfaces.ociproject.IOCIProject"
        class="lp.code.browser.gitlisting.OCIProjectGitListingView"
        permission="zope.Public"
        name="+git"
        template="../templates/gitlisting.pt"/>
    <browser:page
        for="lp.registry.interfaces.personproduct.IPersonProduct"
        class="lp.code.browser.gitlisting.PersonTargetGitListingView"
        permission="zope.Public"
        name="+git"
        template="../templates/gitlisting.pt"/>
    <browser:page
        for="lp.registry.interfaces.persondistributionsourcepackage.IPersonDistributionSourcePackage"
        class="lp.code.browser.gitlisting.PersonDistributionSourcePackageGitListingView"
        permission="zope.Public"
        name="+git"
        template="../templates/gitlisting.pt"/>
    <browser:page
        for="lp.registry.interfaces.personociproject.IPersonOCIProject"
        class="lp.code.browser.gitlisting.PersonOCIProjectGitListingView"
        permission="zope.Public"
        name="+git"
        template="../templates/gitlisting.pt"/>
    <browser:page
        for="lp.registry.interfaces.person.IPerson"
        class="lp.code.browser.gitlisting.PlainGitListingView"
        permission="zope.Public"
        name="+git"
        template="../templates/gitlisting.pt"/>
    <browser:page
        for="lp.registry.interfaces.distribution.IDistribution"
        class="lp.code.browser.gitlisting.PlainGitListingView"
        permission="zope.Public"
        name="+git"
        template="../templates/gitlisting.pt"/>
    <browser:page
        for="lp.code.browser.gitlisting.IGitRepositoryBatchNavigator"
        name="+gitrepository-listing"
        template="../templates/gitrepository-listing.pt"
        permission="zope.Public"/>

    <browser:menus
        classes="ProductBranchesMenu"
        module="lp.code.browser.branchlisting"/>

    <browser:defaultView
        for="lp.registry.interfaces.sourcepackage.ISourcePackage"
        layer="lp.code.publisher.CodeLayer"
        name="+branches"/>

    <browser:defaultView
        for="lp.registry.interfaces.distributionsourcepackage.IDistributionSourcePackage"
        layer="lp.code.publisher.CodeLayer"
        name="+code"/>

    <browser:defaultView
        for="lp.registry.interfaces.persondistributionsourcepackage.IPersonDistributionSourcePackage"
        layer="lp.code.publisher.CodeLayer"
        name="+code"/>

    <browser:defaultView
        for="lp.registry.interfaces.ociproject.IOCIProject"
        layer="lp.code.publisher.CodeLayer"
        name="+code"/>

    <browser:defaultView
        for="lp.registry.interfaces.personociproject.IPersonOCIProject"
        layer="lp.code.publisher.CodeLayer"
        name="+code"/>

    <browser:defaultView
        for="lp.registry.interfaces.distribution.IDistribution"
        layer="lp.code.publisher.CodeLayer"
        name="+code"/>

    <browser:defaultView
        for="lp.registry.interfaces.distroseries.IDistroSeries"
        layer="lp.code.publisher.CodeLayer"
        name="+branches"/>

    <browser:url
        for="lp.code.interfaces.diff.IPreviewDiff"
        path_expression="string:+preview-diff/${id}"
        attribute_to_parent="branch_merge_proposal"
        rootsite="code" />

    <browser:navigation
        module="lp.code.browser.diff"
        classes="PreviewDiffNavigation"/>

    <browser:page
        name="+diff"
        for="lp.code.interfaces.diff.IPreviewDiff"
        class="lp.code.browser.branchmergeproposal.FormatPreviewDiffView"
        permission="launchpad.View"
        template="../templates/branchmergeproposal-diff.pt"/>

    <browser:menus
        module="lp.code.browser.branchlisting"
        classes="PersonProductBranchesMenu"/>

    <browser:defaultView
        for="lp.registry.interfaces.personproduct.IPersonProduct"
        layer="lp.code.publisher.CodeLayer"
        name="+code" />

    <browser:page
        for="lp.registry.interfaces.personproduct.IPersonProduct"
        class="lp.code.browser.branchlisting.PersonProductBranchesView"
        permission="zope.Public"
        name="+branches"
        template="../templates/person-branches.pt"
        />
    <browser:renamed-page
        for="lp.registry.interfaces.personproduct.IPersonProduct"
        name="+ownedbranches"
        new_name="+branches"
        rootsite="code"/>
    <browser:renamed-page
        for="lp.registry.interfaces.personproduct.IPersonProduct"
        name="+registeredbranches"
        new_name="+branches"
        rootsite="code"/>
    <browser:renamed-page
        for="lp.registry.interfaces.personproduct.IPersonProduct"
        name="+subscribedbranches"
        new_name="+branches"
        rootsite="code"/>
    <browser:page
        for="lp.registry.interfaces.personproduct.IPersonProduct"
        class="lp.code.browser.branchmergeproposallisting.PersonProductActiveReviewsView"
        permission="zope.Public"
        name="+activereviews"
        template="../templates/active-reviews.pt"/>

    <browser:page
        for="lp.registry.interfaces.personproduct.IPersonProduct"
        class="lp.code.browser.branchlisting.PersonProductTeamBranchesView"
        name="+portlet-teambranches"
        template="../templates/person-portlet-teambranches.pt"
        permission="zope.Public"
        />

    <browser:page
        for="lp.registry.interfaces.personproduct.IPersonProduct"
        class="lp.code.browser.branchlisting.PersonProductCodeSummaryView"
        name="+codesummary"
        template="../templates/person-codesummary.pt"
        permission="zope.Public"
        />

    <browser:page
        for="lp.code.interfaces.hasbranches.IHasMergeProposals"
        class="lp.code.browser.branchmergeproposallisting.BranchMergeProposalListingView"
        permission="zope.Public"
        name="+merges"
        template="../templates/branchmergeproposal-generic-listing.pt"/>

    <browser:page
        for="lp.code.interfaces.hasbranches.IHasMergeProposals"
        class="lp.code.browser.branchmergeproposallisting.ActiveReviewsView"
        permission="zope.Public"
        name="+activereviews"
        template="../templates/active-reviews.pt"/>

    <adapter
        provides="lp.services.webapp.interfaces.IBreadcrumb"
        for="lp.code.interfaces.branch.IBranch"
        factory="lp.code.browser.branch.BranchBreadcrumb"
        permission="zope.Public"/>

    <adapter
        provides="lp.services.webapp.interfaces.IBreadcrumb"
        for="lp.code.interfaces.branchmergeproposal.IBranchMergeProposal"
        factory="lp.code.browser.branchmergeproposal.BranchMergeProposalBreadcrumb"
        permission="zope.Public"/>

    <adapter
        provides="lp.services.webapp.interfaces.IBreadcrumb"
        for="lp.code.interfaces.codeimportmachine.ICodeImportMachine"
        factory="lp.code.browser.codeimportmachine.CodeImportMachineBreadcrumb"
        permission="zope.Public"/>

    <adapter
        provides="lp.services.webapp.interfaces.IBreadcrumb"
        for="lp.code.interfaces.codeimportmachine.ICodeImportMachineSet"
        factory="lp.code.browser.codeimportmachine.CodeImportMachineSetBreadcrumb"
        permission="zope.Public"/>

    <adapter
         factory="lp.code.browser.branchmergeproposal.PreviewDiffHTMLRepresentation"
         name="lazr.restful.EntryResource"/>

    <adapter
        for="lp.code.interfaces.diff.IPreviewDiff"
        provides="zope.traversing.interfaces.IPathAdapter"
        factory="lp.code.browser.diff.PreviewDiffFormatterAPI"
        name="fmt"
        />
    <adapter
        for="lp.code.interfaces.diff.IDiff"
        provides="zope.traversing.interfaces.IPathAdapter"
        factory="lp.code.browser.diff.DiffFormatterAPI"
        name="fmt"
        />

    <browser:url
        for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
        attribute_to_parent="owner"
        path_expression="string:+recipe/${name}"
        rootsite="code" />
    <browser:url
        for="lp.code.interfaces.sourcepackagerecipebuild.ISourcePackageRecipeBuild"
        attribute_to_parent="archive"
        path_expression="string:+recipebuild/${id}"
        />
    <browser:menus
        classes="SourcePackageRecipeBuildContextMenu"
        module="lp.code.browser.sourcepackagerecipebuild"/>

    <browser:navigation
        module="lp.code.browser.sourcepackagerecipebuild"
        classes="SourcePackageRecipeBuildNavigation" />

        <browser:defaultView
            for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
            name="+index" />
        <browser:page
            for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeView"
            name="+index"
            template="../templates/sourcepackagerecipe-index.pt"
            permission="launchpad.View"/>
        <browser:page
            for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeRequestBuildsHtmlView"
            name="+request-builds"
            template="../templates/sourcepackagerecipe-request-builds.pt"
            permission="launchpad.AnyPerson"/>
        <browser:page
            for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeRequestBuildsAjaxView"
            name="+builds"
            template="../templates/sourcepackagerecipe-builds.pt"
            permission="launchpad.View"/>
        <browser:page
            for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeRequestDailyBuildView"
            name="+request-daily-build"
            permission="launchpad.Edit"/>
        <browser:defaultView
            for="lp.code.interfaces.sourcepackagerecipebuild.ISourcePackageRecipeBuild"
            name="+index"
            />
        <browser:page
            for="lp.code.interfaces.sourcepackagerecipebuild.ISourcePackageRecipeBuild"
            class="lp.code.browser.sourcepackagerecipebuild.SourcePackageRecipeBuildView"
            name="+index"
            template="../templates/sourcepackagerecipebuild-index.pt"
            permission="launchpad.View"/>
        <browser:page
            for="lp.code.interfaces.sourcepackagerecipebuild.ISourcePackageRecipeBuild"
            class="lp.code.browser.sourcepackagerecipebuild.SourcePackageRecipeBuildCancelView"
            name="+cancel"
            template="../../app/templates/generic-edit.pt"
            permission="launchpad.Edit"/>
        <browser:page
            for="lp.code.interfaces.sourcepackagerecipebuild.ISourcePackageRecipeBuild"
            class="lp.code.browser.sourcepackagerecipebuild.SourcePackageRecipeBuildRescoreView"
            name="+rescore"
            template="../../app/templates/generic-edit.pt"
            permission="launchpad.Admin"/>
        <browser:menus
            classes="
                SourcePackageRecipeNavigationMenu
                SourcePackageRecipeContextMenu"
            module="lp.code.browser.sourcepackagerecipe"/>

        <browser:page
            for="lp.code.interfaces.branch.IBranch"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeAddView"
            permission="launchpad.AnyPerson"
            name="+new-recipe"
            template="../templates/sourcepackagerecipe-new.pt"/>
        <browser:page
            for="lp.code.interfaces.gitrepository.IGitRepository"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeAddView"
            permission="launchpad.AnyPerson"
            name="+new-recipe"
            template="../templates/sourcepackagerecipe-new.pt"/>
        <browser:page
            for="lp.code.interfaces.gitref.IGitRef"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeAddView"
            permission="launchpad.AnyPerson"
            name="+new-recipe"
            template="../templates/sourcepackagerecipe-new.pt"/>
        <browser:page
            for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeEditView"
            permission="launchpad.Edit"
            name="+edit"
            template="../../app/templates/generic-edit.pt"/>
        <browser:page
            for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeDeleteView"
            permission="launchpad.Delete"
            name="+delete"
            template="../../app/templates/generic-edit.pt"/>

        <browser:page
            for="lp.code.interfaces.branch.IBranch"
            class="lp.code.browser.sourcepackagerecipelisting.BranchRecipeListingView"
            permission="zope.Public"
            name="+recipes"
            template="../templates/sourcepackagerecipe-listing.pt"/>
        <browser:page
            for="lp.code.interfaces.gitrepository.IGitRepository"
            class="lp.code.browser.sourcepackagerecipelisting.BranchRecipeListingView"
            permission="zope.Public"
            name="+recipes"
            template="../templates/sourcepackagerecipe-listing.pt"/>
        <browser:page
            for="lp.code.interfaces.gitref.IGitRef"
            class="lp.code.browser.sourcepackagerecipelisting.BranchRecipeListingView"
            permission="zope.Public"
            name="+recipes"
            template="../templates/sourcepackagerecipe-listing.pt"/>
        <browser:page
            for="lp.registry.interfaces.product.IProduct"
            class="lp.code.browser.sourcepackagerecipelisting.ProductRecipeListingView"
            permission="zope.Public"
            name="+recipes"
            template="../templates/sourcepackagerecipe-listing.pt"/>
        <browser:page
            for="lp.registry.interfaces.person.IPerson"
            class="lp.code.browser.sourcepackagerecipelisting.PersonRecipeListingView"
            permission="zope.Public"
            name="+recipes"
            template="../templates/sourcepackagerecipe-listing.pt"/>

        <adapter
            provides="lp.services.webapp.interfaces.IBreadcrumb"
            for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
            factory="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeBreadcrumb"
            permission="zope.Public"/>

    </facet>

</configure>
