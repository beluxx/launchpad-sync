<!-- Copyright 2009-2021 Canonical Ltd.  This software is licensed under the
     GNU Affero General Public License version 3 (see the file LICENSE).
-->

<configure
  xmlns="http://namespaces.zope.org/zope"
  xmlns:browser="http://namespaces.zope.org/browser"
  xmlns:i18n="http://namespaces.zope.org/i18n"
  xmlns:lp="http://namespaces.canonical.com/lp"
  i18n_domain="launchpad">
<facet facet="answers">

  <!-- Because of Zope issue #754, defaultView still needs to
       be added for specific content object that also provides
       IQuestionCollection. -->
  <browser:defaultView
    for="lp.answers.interfaces.questioncollection.IQuestionCollection"
    layer="lp.answers.publisher.AnswersLayer"
    name="+tickets"
    />
  <browser:page
    for="lp.answers.interfaces.questioncollection.IQuestionCollection"
    class=".questiontarget.SearchQuestionsView"
    name="+questions"
    permission="zope.Public"
    />
  <browser:renamed-page
    for="lp.answers.interfaces.questioncollection.IQuestionCollection"
    name="+tickets"
    new_name="+questions"
    rootsite="answers"
    />
  <browser:page
    for="lp.answers.interfaces.questioncollection.IQuestionCollection"
    class=".questiontarget.QuestionCollectionLatestQuestionsPortlet"
    name="+portlet-latestquestions"
    permission="zope.Public"
    template="../templates/questiontarget-portlet-latestquestions.pt"
    />
  <browser:page
    for="lp.answers.interfaces.questioncollection.ISearchableByQuestionOwner"
    class=".questiontarget.QuestionCollectionMyQuestionsView"
    name="+myquestions"
    permission="launchpad.AnyPerson"
    />
  <browser:renamed-page
    for="lp.answers.interfaces.questioncollection.ISearchableByQuestionOwner"
    name="+mytickets"
    new_name="+myquestions"
    rootsite="answers"
    />
  <browser:page
    for="lp.answers.interfaces.questioncollection.ISearchableByQuestionOwner"
    class=".questiontarget.QuestionCollectionNeedAttentionView"
    name="+need-attention"
    permission="launchpad.AnyPerson"
    />
  <browser:page
    for="lp.answers.interfaces.questiontarget.IQuestionTarget"
    class=".questiontarget.QuestionCollectionByLanguageView"
    name="+by-language"
    permission="launchpad.AnyPerson"
    />
  <browser:renamed-page
    for="lp.answers.interfaces.questiontarget.IQuestionTarget"
    name="+unsupported"
    new_name="+questions"
    rootsite="answers"
    />
  <browser:page
    for="lp.answers.interfaces.questiontarget.IQuestionTarget"
    name="+answer-contact"
    permission="launchpad.AnyPerson"
    class="lp.answers.browser.questiontarget.ManageAnswerContactView"
    template="../templates/questiontarget-manage-answercontacts.pt"
    />
  <browser:renamed-page
    for="lp.answers.interfaces.questiontarget.IQuestionTarget"
    name="+support-contact"
    new_name="+answer-contact"
    rootsite="answers"
    />
  <browser:page
    for="lp.answers.interfaces.questiontarget.IQuestionTarget"
    name="+portlet-answercontacts"
    class=".questiontarget.QuestionTargetPortletAnswerContacts"
    permission="zope.Public"
    template="../templates/questiontarget-portlet-answercontacts.pt"
    />
  <browser:page
      for="lp.answers.interfaces.question.IQuestionTarget"
      name="+portlet-answercontacts-details"
      class="
        lp.answers.browser.questiontarget.QuestionTargetPortletAnswerContactsWithDetails"
      permission="zope.Public"/>
  <browser:page
    name="+addquestion"
    for="lp.answers.interfaces.questiontarget.IQuestionTarget"
    class=".question.QuestionAddView"
    permission="launchpad.AnyPerson"
    />
  <browser:renamed-page
    for="lp.answers.interfaces.questiontarget.IQuestionTarget"
    name="+addticket"
    new_name="+addquestion"
    rootsite="answers"
    />
  <browser:page
    name="+ask-a-question-button"
    for="lp.answers.interfaces.questiontarget.IQuestionTarget"
    class=".questiontarget.AskAQuestionButtonPortlet"
    permission="zope.Public"
    />
  <browser:menus
    module=".questiontarget"
    classes="QuestionCollectionAnswersMenu QuestionTargetAnswersMenu"
    />
  <browser:menus
    module="lp.answers.browser.faq"
    classes="FAQNavigationMenu"
    />
  <browser:menus
    module="lp.answers.browser.question"
    classes="
        QuestionEditMenu
        QuestionExtrasMenu
        QuestionSetContextMenu" />

  <browser:defaultView
    for="lp.answers.interfaces.question.IQuestion"
    name="+index"
    />

  <lp:url
    for="lp.answers.interfaces.question.IQuestion"
    path_expression="string:+question/${id}"
    attribute_to_parent="target"
    rootsite="answers"
    />

  <lp:url
    for="lp.answers.interfaces.questionsubscription.IQuestionSubscription"
    path_expression="string:subscriptions/${person}"
    attribute_to_parent="question"
    rootsite="answers"
    />

  <adapter
    provides="lp.services.webapp.interfaces.IBreadcrumb"
    for="lp.answers.interfaces.question.IQuestion"
    factory="lp.answers.browser.question.QuestionBreadcrumb"
    permission="zope.Public"/>

  <browser:pages
    for="lp.answers.interfaces.question.IQuestion"
    permission="zope.Public"
    >
    <browser:page
      name="+portlet-reopenings"
      template="../templates/question-portlet-reopenings.pt"
      />
    <browser:page
      name="+portlet-subscribers"
      template="../templates/question-portlet-subscribers.pt"
      />
  </browser:pages>

  <browser:pages
    for="lp.answers.interfaces.question.IQuestion"
    class="lp.services.webapp.LaunchpadView"
    permission="zope.Public"
    >
    <browser:page
      name="+listing-detailed"
      template="../templates/question-listing-detailed.pt"
      />
    <browser:page
      name="+portlet-details"
      template="../templates/question-portlet-details.pt"
      />
  </browser:pages>

  <browser:page
      for="lp.answers.interfaces.question.IQuestion"
      name="+portlet-subscribers-details"
      class="
        lp.answers.browser.questionsubscription.QuestionPortletSubscribersWithDetails"
      permission="zope.Public"/>

  <browser:page
    name="+index"
    for="lp.answers.interfaces.question.IQuestion"
    class=".question.QuestionWorkflowView"
    permission="zope.Public"
    template="../templates/question-index.pt"
    />

  <browser:page
    name="+history"
    for="lp.answers.interfaces.question.IQuestion"
    class=".question.QuestionHistoryView"
    permission="zope.Public"
    template="../templates/question-history.pt"
    />

  <browser:page
    name="+confirm"
    for="lp.answers.interfaces.question.IQuestion"
    class=".question.QuestionConfirmAnswerView"
    permission="launchpad.Owner"
    template="../templates/question-confirm-answer.pt"
    />

  <browser:page
    name="+reject"
    for="lp.answers.interfaces.question.IQuestion"
    class=".question.QuestionRejectView"
    permission="launchpad.Append"
    template="../templates/question-reject.pt"
    />

  <browser:page
    name="+subscribe"
    template="../templates/question-subscription.pt"
    for="lp.answers.interfaces.question.IQuestion"
    class=".question.QuestionSubscriptionView"
    permission="launchpad.AnyPerson"
    />

  <browser:page
    name="+edit"
    for="lp.answers.interfaces.question.IQuestion"
    class=".question.QuestionEditView"
    permission="launchpad.AnyPerson"
    template="../../app/templates/generic-edit.pt"
    />

  <browser:page
    name="+change-status"
    for="lp.answers.interfaces.question.IQuestion"
    class=".question.QuestionChangeStatusView"
    permission="launchpad.Admin"
    template="../templates/question-change-status.pt"
    />

  <browser:page
    name="+linkfaq"
    for="lp.answers.interfaces.question.IQuestion"
    class=".question.QuestionLinkFAQView"
    permission="launchpad.AnyPerson"
    template="../templates/question-linkfaq.pt"
    />

  <browser:page
    name="+createfaq"
    for="lp.answers.interfaces.question.IQuestion"
    class=".question.QuestionCreateFAQView"
    permission="launchpad.Append"
    template="../../app/templates/generic-edit.pt"
    />

  <lp:url
    for="lp.answers.interfaces.question.IQuestionMessage"
    path_expression="string:messages/${display_index}"
    attribute_to_parent="question"
    rootsite="answers"
    />

  <browser:page
    name="+display"
    for="lp.answers.interfaces.questionmessage.IQuestionMessage"
    class=".question.QuestionMessageDisplayView"
    permission="zope.Public"
    template="../templates/questionmessage-display.pt"
    />

  <!-- IQuestionSet -->
  <browser:navigation
    module=".question"
    classes="QuestionSetNavigation"
    />
  <browser:navigation
    module=".question"
    classes="QuestionNavigation"
    />
  <browser:navigation
    module=".question"
    classes="QuestionMessageNavigation"
    />

  <lp:url
    for="lp.answers.interfaces.questioncollection.IQuestionSet"
    path_expression="string:questions"
    parent_utility="lp.services.webapp.interfaces.ILaunchpadRoot"
    rootsite="answers"
    />

  <browser:defaultView
    for="lp.answers.interfaces.questioncollection.IQuestionSet"
    name="+index"
    />

  <browser:page
    name="+index"
    for="lp.answers.interfaces.questioncollection.IQuestionSet"
    class=".question.QuestionSetView"
    permission="zope.Public"
    template="../templates/questions-index.pt"
    />

  <browser:page
    name="+ask-a-question-button"
    for="lp.answers.interfaces.questioncollection.IQuestionSet"
    permission="zope.Public"
    template="../templates/null.pt"
    />

  <browser:page
    for="lp.answers.interfaces.questioncollection.IQuestionSet"
    class="lp.answers.browser.question.SearchAllQuestionsView"
    name="+questions"
    permission="zope.Public"
    />
  <browser:page
    for="lp.answers.interfaces.faqcollection.IFAQCollection"
    class=".faqcollection.SearchFAQsView"
    name="+faqs"
    permission="zope.Public"
    template="../templates/faq-listing.pt"
    />
  <browser:page
    for="lp.answers.interfaces.faqcollection.IFAQCollection"
    class=".faqcollection.SearchFAQsView"
    name="+portlet-listfaqs"
    permission="zope.Public"
    template="../templates/faqcollection-portlet-faqs.pt"
    />
  <browser:page
    name="+createfaq"
    for="lp.answers.interfaces.faqtarget.IFAQTarget"
    class=".faqtarget.FAQCreateView"
    permission="launchpad.Append"
    template="../../app/templates/generic-edit.pt"
    />

  <lp:url
    for="lp.answers.interfaces.faq.IFAQ"
    path_expression="string:+faq/${id}"
    attribute_to_parent="target"
    rootsite="answers"
    />
  <browser:defaultView
    for="lp.answers.interfaces.faq.IFAQ"
    name="+index"
    />
  <browser:page
    name="+index"
    for="lp.answers.interfaces.faq.IFAQ"
    class=".faq.FAQView"
    permission="zope.Public"
    template="../templates/faq-index.pt"
    />
  <browser:page
    name="+portlet-related-questions"
    for="lp.answers.interfaces.faq.IFAQ"
    class="lp.services.webapp.LaunchpadView"
    permission="zope.Public"
    template="../templates/faq-portlet-related-questions.pt"
    />
  <browser:page
    name="+edit"
    for="lp.answers.interfaces.faq.IFAQ"
    class=".faq.FAQEditView"
    permission="launchpad.Edit"
    template="../../app/templates/generic-edit.pt"
    />
  <adapter
    provides="lp.services.webapp.interfaces.IBreadcrumb"
    for="lp.answers.interfaces.faq.IFAQ"
    factory="lp.answers.browser.faq.FAQBreadcrumb"
    permission="zope.Public"/>

  <browser:defaultView
    for="lp.registry.interfaces.person.IPerson"
    layer="lp.answers.publisher.AnswersLayer"
    name="+questions"
    />

    <browser:page
        for="lp.registry.interfaces.person.IPerson"
        name="+ask-a-question-button"
        template="../templates/null.pt"
        permission="zope.Public"
        />
  <browser:page
    for="lp.registry.interfaces.person.IPerson"
    class="lp.answers.browser.person.PersonLatestQuestionsView"
    name="+portlet-latestquestions"
    permission="zope.Public"
    template="../templates/questiontarget-portlet-latestquestions.pt"
    />
  <browser:page
    for="lp.registry.interfaces.person.IPerson"
    class="lp.answers.browser.person.PersonSearchQuestionsView"
    name="+questions"
    permission="zope.Public"
    />
  <browser:renamed-page
    for="lp.registry.interfaces.person.IPerson"
    name="+tickets"
    new_name="+questions"
    rootsite="answers"
    />
  <browser:page
    for="lp.registry.interfaces.person.IPerson"
    class="lp.answers.browser.person.SearchAnsweredQuestionsView"
    name="+answeredquestions"
    permission="zope.Public"
    />
  <browser:renamed-page
    for="lp.registry.interfaces.person.IPerson"
    name="+answeredtickets"
    new_name="+answeredquestions"
    rootsite="answers"
    />
  <browser:page
    for="lp.registry.interfaces.person.IPerson"
    class="lp.answers.browser.person.SearchAssignedQuestionsView"
    name="+assignedquestions"
    permission="zope.Public"
    />
  <browser:renamed-page
    for="lp.registry.interfaces.person.IPerson"
    name="+assignedtickets"
    new_name="+assignedquestions"
    rootsite="answers"
    />
  <browser:page
    for="lp.registry.interfaces.person.IPerson"
    class="lp.answers.browser.person.SearchCommentedQuestionsView"
    name="+commentedquestions"
    permission="zope.Public"
    />
  <browser:renamed-page
    for="lp.registry.interfaces.person.IPerson"
    name="+commentedtickets"
    new_name="+commentedquestions"
    rootsite="answers"
    />
  <browser:page
    for="lp.registry.interfaces.person.IPerson"
    class="lp.answers.browser.person.SearchCreatedQuestionsView"
    name="+createdquestions"
    permission="zope.Public"
    />
  <browser:renamed-page
    for="lp.registry.interfaces.person.IPerson"
    name="+createdtickets"
    new_name="+createdquestions"
    rootsite="answers"
    />
  <browser:page
    for="lp.registry.interfaces.person.IPerson"
    class="lp.answers.browser.person.SearchNeedAttentionQuestionsView"
    name="+needattentionquestions"
    permission="zope.Public"
    />
  <browser:renamed-page
    for="lp.registry.interfaces.person.IPerson"
    name="+needattentiontickets"
    new_name="+needattentionquestions"
    rootsite="answers"
    />
  <browser:page
    for="lp.registry.interfaces.person.IPerson"
    class="lp.answers.browser.person.SearchSubscribedQuestionsView"
    name="+subscribedquestions"
    permission="zope.Public"
    />
  <browser:renamed-page
    for="lp.registry.interfaces.person.IPerson"
    name="+subscribedtickets"
    new_name="+subscribedquestions"
    rootsite="answers"
    />
  <browser:page
    for="lp.registry.interfaces.person.IPerson"
    class="lp.answers.browser.person.PersonAnswerContactForView"
    name="+answer-contact-for"
    permission="zope.Public"
    template="../templates/person-answer-contact-for.pt"
    />
  <browser:menus
    module="lp.answers.browser.person"
    classes="PersonAnswersMenu"
    />
  <browser:page
    for="lp.registry.interfaces.person.IPerson"
    class="lp.registry.browser.person.RestrictedMembershipsPersonView"
    name="+restricted-membership"
    permission="zope.Public"
    />
</facet>

</configure>
